(()=>{var e={};e.id=103,e.ids=[103],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5315:e=>{"use strict";e.exports=require("path")},1392:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>f,tree:()=>c});var n=t(3003),i=t(4293),s=t(6550),a=t.n(s),o=t(6979),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let c=["",{children:["library",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5831)),"C:\\Users\\Pici\\Desktop\\Projects-own\\entrido Pdf-viewer\\app\\library\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6877)),"C:\\Users\\Pici\\Desktop\\Projects-own\\entrido Pdf-viewer\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2075,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Pici\\Desktop\\Projects-own\\entrido Pdf-viewer\\app\\library\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/library/page",pathname:"/library",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},294:(e,r,t)=>{Promise.resolve().then(t.bind(t,7100))},8167:(e,r,t)=>{Promise.resolve().then(t.bind(t,8633))},9317:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,2639,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23)),Promise.resolve().then(t.t.bind(t,2816,23))},8633:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var n=t(8819),i=t(7266),s=t(7389),a=t(2643),o=t(3305);function l(){let[e,r]=(0,i.useState)([]),[t,l]=(0,i.useState)({}),[c,d]=(0,i.useState)(!1),u=(0,s.useRouter)();async function f(e){let r=await fetch(`/api/sources/${e}/list`,{method:"POST"}),t=await r.json();if(!r.ok){alert(t?.error||"Error");return}l(r=>({...r,[e]:t.items||[]}))}async function p(e,r){let t=await fetch(`/api/sources/${e}/ticket`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_id:r})}),n=await t.json();if(!t.ok){alert(n?.error||"Error");return}u.push(n.viewer_path)}return(0,n.jsxs)("main",{className:"container py-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Your library"}),c&&(0,n.jsx)("p",{className:"mt-3 text-slate-600",children:"Loadingâ€¦"}),0===e.length&&!c&&(0,n.jsxs)("p",{className:"mt-3 text-slate-600",children:["No sources yet. Add one on the ",(0,n.jsx)("a",{href:"/redeem",className:"underline",children:"Redeem"})," page."]}),(0,n.jsx)("div",{className:"mt-6 space-y-6",children:e.map(e=>(0,n.jsxs)(a.Zb,{children:[(0,n.jsx)(a.Ol,{children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"font-medium",children:e.source_label}),(0,n.jsx)(o.z,{className:"ml-auto",variant:"outline",onClick:()=>f(e.id),children:"List files"})]})}),(0,n.jsx)(a.aY,{children:(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:(t[e.id]||[]).map(r=>(0,n.jsxs)("div",{className:"rounded-2xl border p-3 flex flex-col",children:[(0,n.jsx)("div",{className:"font-medium text-sm",children:r.name}),(0,n.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["#",r.download_id]}),(0,n.jsx)(o.z,{className:"mt-2",onClick:()=>p(e.id,r.download_id),children:"Open"})]},r.download_id))})})]},e.id))})]})}},7100:(e,r,t)=>{"use strict";t.d(r,{default:()=>d});var n=t(8819),i=t(434),s=t(7266),a=t(3855),o=t(1876),l=t(9635),c=t(6507);function d(){let[e,r]=(0,s.useState)(!1);return(0,n.jsx)("header",{className:"sticky top-0 z-20 border-b bg-white/80 backdrop-blur",children:(0,n.jsxs)("div",{className:"container py-3 flex items-center gap-4",children:[(0,n.jsx)(i.default,{href:"/",className:"font-semibold",children:"Entriso PDFs"}),(0,n.jsxs)("nav",{className:"ml-auto flex items-center gap-3 text-sm",children:[(0,n.jsxs)(i.default,{href:"/redeem",className:"inline-flex items-center gap-1 hover:underline",children:[(0,n.jsx)(a.Z,{size:16})," Redeem"]}),(0,n.jsxs)(i.default,{href:"/library",className:"inline-flex items-center gap-1 hover:underline",children:[(0,n.jsx)(o.Z,{size:16})," Library"]}),(0,n.jsxs)(i.default,{href:"/account",className:"inline-flex items-center gap-1 hover:underline",children:[(0,n.jsx)(l.Z,{size:16})," Account"]}),!e&&(0,n.jsxs)("span",{className:"hidden sm:inline-flex items-center text-xs text-slate-500",children:[(0,n.jsx)(c.Z,{size:14,className:"mr-1"}),"Install via browser menu"]})]})]})})}},3305:(e,r,t)=>{"use strict";t.d(r,{z:()=>s});var n=t(8819),i=t(7266);let s=t.n(i)().forwardRef(({className:e,variant:r="primary",size:t="md",...i},s)=>(0,n.jsx)("button",{ref:s,className:function(){for(var e,r,t=0,n="",i=arguments.length;t<i;t++)(e=arguments[t])&&(r=function e(r){var t,n,i="";if("string"==typeof r||"number"==typeof r)i+=r;else if("object"==typeof r){if(Array.isArray(r)){var s=r.length;for(t=0;t<s;t++)r[t]&&(n=e(r[t]))&&(i&&(i+=" "),i+=n)}else for(n in r)r[n]&&(i&&(i+=" "),i+=n)}return i}(e))&&(n&&(n+=" "),n+=r);return n}("inline-flex items-center justify-center rounded-2xl font-medium transition focus:outline-none focus:ring-2 focus:ring-brand/40 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-brand text-white hover:bg-indigo-500",outline:"border border-slate-300 hover:bg-slate-50",ghost:"hover:bg-slate-100"}[r],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-5 py-2.5 text-base"}[t],e),...i}));s.displayName="Button"},2643:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>s,Zb:()=>i,aY:()=>a});var n=t(8819);function i({children:e,className:r}){return(0,n.jsx)("div",{className:`rounded-2xl border shadow-soft ${r||""}`,children:e})}function s({children:e,className:r}){return(0,n.jsx)("div",{className:`p-4 border-b ${r||""}`,children:e})}function a({children:e,className:r}){return(0,n.jsx)("div",{className:`p-4 ${r||""}`,children:e})}t(7266)},6877:(e,r,t)=>{"use strict";t.a(e,async(e,n)=>{try{t.r(r),t.d(r,{default:()=>o,metadata:()=>l});var i=t(9351);t(7272);var s=t(2262),a=e([s]);s=(a.then?(await a)():a)[0];let l={title:"Entriso PDF Viewer",description:"Secure preview of purchased PDFs with multi-source tokens",manifest:"/manifest.webmanifest",themeColor:"#4f46e5"},c=`
(function() {
  if (typeof window==='undefined') return;
  var enable = (typeof process !== 'undefined' && process.env && process.env.NEXT_PUBLIC_ENABLE_SW) || '0';
  if (enable !== '1') {
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistrations().then(rs => rs.forEach(r => r.unregister()));
    }
    return;
  }
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('/sw.js').catch(function(){});
    });
  }
})();`;function o({children:e}){return(0,i.jsxs)("html",{lang:"en",children:[(0,i.jsxs)("head",{children:[(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, viewport-fit=cover"}),(0,i.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,i.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"}),(0,i.jsx)("link",{rel:"manifest",href:"/manifest.webmanifest"})]}),(0,i.jsxs)("body",{children:[(0,i.jsx)(s.Z,{}),e,(0,i.jsx)("script",{dangerouslySetInnerHTML:{__html:c}})]})]})}n()}catch(e){n(e)}})},5831:(e,r,t)=>{"use strict";t.a(e,async(e,n)=>{try{t.r(r),t.d(r,{default:()=>e});var i=t(1851);let e=(await (0,i.createProxy)(String.raw`C:\Users\Pici\Desktop\Projects-own\entrido Pdf-viewer\app\library\page.tsx`)).default;n()}catch(e){n(e)}},1)},2262:(e,r,t)=>{"use strict";t.a(e,async(e,n)=>{try{t.d(r,{Z:()=>e});var i=t(1851);let e=(await (0,i.createProxy)(String.raw`C:\Users\Pici\Desktop\Projects-own\entrido Pdf-viewer\components\NavBar.tsx`)).default;n()}catch(e){n(e)}},1)},5730:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return a}});let n=function(e,r){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(void 0);if(t&&t.has(e))return t.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=s?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(t(2052));function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}let s={current:null};function a(e){return function(...r){console.error(e(...r))}}("function"==typeof n.cache?n.cache:e=>e)(e=>{try{console.error(s.current)}finally{s.current=null}})},2030:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{describeHasCheckingStringProperty:function(){return o},describeStringPropertyAccess:function(){return a},makeResolvedReactPromise:function(){return i},throwWithStaticGenerationBailoutError:function(){return l},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return c},wellKnownProperties:function(){return d}});let n=t(8749);function i(e){let r=Promise.resolve(e);return r.status="fulfilled",r.value=e,r}let s=/^[A-Za-z_$][A-Za-z0-9_$]*$/;function a(e,r){return s.test(r)?`\`${e}.${r}\``:`\`${e}[${JSON.stringify(r)}]\``}function o(e,r){let t=JSON.stringify(r);return`\`Reflect.has(${e}, ${t})\`, \`${t} in ${e}\`, or similar`}function l(e,r){throw new n.StaticGenBailoutError(`Route ${e} couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`)}function c(e,r){throw new n.StaticGenBailoutError(`Route ${e} with \`dynamic = "error"\` couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`)}let d=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","then","catch","finally","status","toJSON","$$typeof","__esModule"])},1152:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReflectAdapter",{enumerable:!0,get:function(){return t}});class t{static get(e,r,t){let n=Reflect.get(e,r,t);return"function"==typeof n?n.bind(e):n}static set(e,r,t,n){return Reflect.set(e,r,t,n)}static has(e,r){return Reflect.has(e,r)}static deleteProperty(e,r){return Reflect.deleteProperty(e,r)}}},7272:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[147,597],()=>t(1392));module.exports=n})();